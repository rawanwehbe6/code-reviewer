ğŸ§  The Big Idea

You are building a mini AI-powered code review service.

Think of it like this:

You send a piece of code to a PHP API â†’ the API â€œpretendsâ€ to ask an AI to review it â†’ the API sends back a structured list of issues and suggestions in JSON.

This is not a real AI model â€” itâ€™s a simulation or â€œmockâ€ version.
The goal is to practice designing APIs with strict validation and clear output schemas â€” like what a real AI code review tool would need.

ğŸ§© The Two Roles

The project is split into two roles (like pair programming):

ğŸ‘¨â€ğŸ’» Person A â€” â€œDriverâ€

Builds the PHP API endpoint (e.g. review.php)

Handles the HTTP request and response

Parses JSON input

Returns a structured JSON response (list of review issues)

Makes sure the response always follows the schema defined by the Critic

ğŸ‘©â€ğŸ”¬ Person B â€” â€œCriticâ€

Defines the JSON schema (the format that all reviews must follow)

Defines rules and allowed values (e.g. severity can only be low, medium, high)

Writes automated JavaScript tests that call the API and check if the response:

Is valid JSON

Has all required fields

Has allowed severity values

Contains meaningful issues (like â€œmissing validationâ€)

ğŸ§± What the API Does (Step by Step)
1. Input (Request)

A client sends a JSON payload like this:

{
  "language": "python",
  "filename": "app.py",
  "code": "def login():\n    password = input('Enter password: ')\n    print('Logged in!')"
}

2. Processing (Mock â€œAI Reviewâ€)

The API (PHP script) looks at the code and pretends to ask an AI something like:

â€œFind problems in this code and give suggestions.â€

Then it generates structured feedback â€” for example:

[
  {
    "severity": "high",
    "file": "app.py",
    "issue": "Function accepts user input without validation.",
    "suggestion": "Add input validation to ensure safety.",
    "line": 2
  },
  {
    "severity": "medium",
    "file": "app.py",
    "issue": "No error handling present.",
    "suggestion": "Use try-except blocks to handle errors gracefully.",
    "line": 1
  }
]

3. Output (Response)

The PHP API sends that list back to the client.
âœ… Always valid JSON
âœ… Always matches the Criticâ€™s schema

ğŸ“‹ The Schema (Defined by Person B)

Person B says exactly how every â€œreview itemâ€ must look.

Example schema:

Field	Type	Description
severity	string	must be â€œlowâ€, â€œmediumâ€, or â€œhighâ€
file	string	filename where issue is found
issue	string	description of the problem
suggestion	string	how to fix it
line (opt.)	number	line number (optional)

So every single review item must have severity, file, issue, and suggestion.

If one is missing or invalid (e.g. severity: "urgent"), the test should fail.

âš™ï¸ Guardrails / Validation

The PHP API must validate what it returns:

Only allowed severities: "low", "medium", "high"

Always return an array (even empty)

No missing fields

No nonsense like "improve performance" with no explanation

If something is wrong â†’ it must fix or reject it before sending.

ğŸ§ª The Tests (Done by Person B)

Person B writes JavaScript tests that:

Send sample JSON input to the PHP endpoint (fetch() or similar)

Parse the response

Check:

Is it valid JSON?

Is it an array?

Does each item have all required fields?

Are severity values valid?

Does at least one issue mention â€œvalidationâ€ (for the sample Python code)?

If any of these fail â†’ the test prints an error.

âš¡ Optional Extras

You can define â€œextendedâ€ schema mode â†’ includes more fields (like rule_id, category)

Add a config file in PHP for:

Allowed severities

Strict mode (reject responses that donâ€™t match schema)

Add logs to record â€œbadâ€ AI issues for later debugging

ğŸ§â€â™‚ï¸ğŸ§â€â™€ï¸ Putting It All Together
Role	Responsibility	Tech
Person A (Driver)	Build the PHP API endpoint	PHP
Person B (Critic)	Define schema + write validation tests	JSON Schema + JavaScript tests

The final setup looks like this:

Client (JS Test)
   â†“
review.php (API)
   â†“
Mock AI generates review
   â†“
Validation layer ensures schema compliance
   â†“
JSON response (structured)

ğŸ’¡ In One Sentence

Youâ€™re building a fake AI code review API in PHP that returns structured, validated JSON review items â€” and a JS test suite that ensures the API always returns well-formed, schema-compliant results.